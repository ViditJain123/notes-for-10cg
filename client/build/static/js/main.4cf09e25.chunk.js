(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{27:function(e,t,a){e.exports=a(55)},32:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(24),r=a.n(o),c=(a(32),a(4)),s=a.n(c);function i(e){let{setIsLogin:t}=e;const[a,o]=Object(n.useState)({name:"",email:"",password:""}),[r,c]=Object(n.useState)(""),i=e=>{const{name:t,value:n}=e.target;o({...a,[t]:n}),c("")},[m,d]=Object(n.useState)(!1),u={visibility:m?"visible":"hidden",opacity:m?1:0};return l.a.createElement("section",{className:"login-page"},l.a.createElement("div",{className:"login create-note"},l.a.createElement("h2",null,"Login"),l.a.createElement("form",{onSubmit:async e=>{e.preventDefault();try{const e=await s.a.post("/users/login",{email:a.email,password:a.password});o({name:"",email:"",password:""}),localStorage.setItem("tokenStore",e.data.token),t(!0)}catch(r){r.response.data.msg&&c(r.response.data.msg)}}},l.a.createElement("input",{type:"email",name:"email",id:"login-email",placeholder:"Email",required:!0,value:a.email,onChange:i}),l.a.createElement("input",{type:"password",name:"password",id:"login-password",placeholder:"Password",required:!0,value:a.password,autoComplete:"true",onChange:i}),l.a.createElement("button",{type:"submit"},"Login"),l.a.createElement("p",null,"You don't have an account?",l.a.createElement("span",{onClick:()=>d(!0)}," Register Now")),l.a.createElement("h3",null,r))),l.a.createElement("div",{className:"register create-note",style:u},l.a.createElement("h2",null,"Register"),l.a.createElement("form",{onSubmit:async e=>{e.preventDefault();try{const e=await s.a.post("/users/register",{username:a.name,email:a.email,password:a.password});o({name:"",email:"",password:""}),c(e.data.msg)}catch(r){r.response.data.msg&&c(r.response.data.msg)}}},l.a.createElement("input",{type:"text",name:"name",id:"register-name",placeholder:"User Name",required:!0,value:a.name,onChange:i}),l.a.createElement("input",{type:"email",name:"email",id:"register-email",placeholder:"Email",required:!0,value:a.email,onChange:i}),l.a.createElement("input",{type:"password",name:"password",id:"register-password",placeholder:"Password",required:!0,value:a.password,autoComplete:"true",onChange:i}),l.a.createElement("button",{type:"submit"},"Register"),l.a.createElement("p",null,"You have an account?",l.a.createElement("span",{onClick:()=>d(!1)}," Login Now")),l.a.createElement("h3",null,r))))}var m=a(8);function d(e){let{setIsLogin:t}=e;return l.a.createElement("header",null,l.a.createElement("div",{className:"logo"},l.a.createElement("h1",null,l.a.createElement(m.b,{to:"/"},"NOTES FOR 10CG"))),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(m.b,{to:"/"},"Home")),l.a.createElement("li",null,l.a.createElement(m.b,{to:"/create"},"Create Note")),l.a.createElement("li",{onClick:()=>{localStorage.clear(),t(!1)}},l.a.createElement(m.b,{to:"/"},"Logout"))))}var u=a(26);function p(){const[e,t]=Object(n.useState)([]),[a,o]=Object(n.useState)(""),[r,c]=Object(n.useState)(""),i=async e=>{const a=await s.a.get("api/notes",{headers:{Authorization:e}});t(a.data)};Object(n.useEffect)(()=>{const e=localStorage.getItem("tokenStore");o(e),e&&i(e)},[]);const d=e.filter(e=>e.title.toLowerCase().includes(r.toLowerCase())||e.content.toLowerCase().includes(r.toLowerCase()));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"search-bar"},l.a.createElement("input",{type:"text",placeholder:"Search",value:r,onChange:e=>c(e.target.value),className:"search-input"})),l.a.createElement("div",{className:"note-wrapper"},d.map(e=>l.a.createElement("div",{className:"card",key:e._id},l.a.createElement("h4",{title:e.title},e.title),l.a.createElement("div",{className:"text-wrapper"},l.a.createElement("p",null,e.content)),l.a.createElement("p",{className:"date"},Object(u.a)(e.date)),l.a.createElement("div",{className:"card-footer"},e.name,l.a.createElement(m.b,{to:"edit/".concat(e._id)},"Edit")),l.a.createElement("button",{className:"close",onClick:()=>(async e=>{try{a&&(await s.a.delete("api/notes/".concat(e),{headers:{Authorization:a}}),i(a))}catch(t){window.location.href="/"}})(e._id)},"X")))))}var E=a(1);function h(){const[e,t]=Object(n.useState)({title:"",content:"",date:""}),a=Object(E.e)(),o=a=>{const{name:n,value:l}=a.target;t({...e,[n]:l})};return l.a.createElement("div",{className:"create-note"},l.a.createElement("h2",null,"Create Note"),l.a.createElement("form",{onSubmit:async t=>{t.preventDefault();try{const t=localStorage.getItem("tokenStore");if(t){const{title:n,content:l,date:o}=e,r={title:n,content:l,date:o};return await s.a.post("/api/notes",r,{headers:{Authorization:t}}),a.push("/")}}catch(n){window.location.href="/"}},autoComplete:"off"},l.a.createElement("div",{className:"row"},l.a.createElement("label",{htmlFor:"title"},"Title"),l.a.createElement("input",{type:"text",value:e.title,id:"title",name:"title",required:!0,onChange:o})),l.a.createElement("div",{className:"row"},l.a.createElement("label",{htmlFor:"content"},"Content"),l.a.createElement("textarea",{type:"text",value:e.content,id:"content",name:"content",required:!0,rows:"10",onChange:o})),l.a.createElement("label",{htmlFor:"date"},"Date: ",e.date," "),l.a.createElement("div",{className:"row"},l.a.createElement("input",{type:"date",id:"date",name:"date",onChange:o})),l.a.createElement("button",{type:"submit"},"Save")))}function g(e){let{match:t}=e;const[a,o]=Object(n.useState)({title:"",content:"",date:"",id:""}),r=Object(E.e)();Object(n.useEffect)(()=>{(async()=>{const e=localStorage.getItem("tokenStore");if(t.params.id){const a=await s.a.get("/api/notes/".concat(t.params.id),{headers:{Authorization:e}});o({title:a.data.title,content:a.data.content,date:new Date(a.data.date).toLocaleDateString(),id:a.data._id})}})()},[t.params.id]);const c=e=>{const{name:t,value:n}=e.target;o({...a,[t]:n})};return l.a.createElement("div",{className:"create-note"},l.a.createElement("h2",null,"Edit Note"),l.a.createElement("form",{onSubmit:async e=>{e.preventDefault();try{const e=localStorage.getItem("tokenStore");if(e){const{title:t,content:n,date:l,id:o}=a,c={title:t,content:n,date:l};return await s.a.put("/api/notes/".concat(o),c,{headers:{Authorization:e}}),r.push("/")}}catch(t){window.location.href="/"}},autoComplete:"off"},l.a.createElement("div",{className:"row"},l.a.createElement("label",{htmlFor:"title"},"Title"),l.a.createElement("input",{type:"text",value:a.title,id:"title",name:"title",required:!0,onChange:c})),l.a.createElement("div",{className:"row"},l.a.createElement("label",{htmlFor:"content"},"Content"),l.a.createElement("textarea",{type:"text",value:a.content,id:"content",name:"content",required:!0,rows:"10",onChange:c})),l.a.createElement("label",{htmlFor:"date"},"Date: ",a.date," "),l.a.createElement("div",{className:"row"},l.a.createElement("input",{type:"date",id:"date",name:"date",onChange:c})),l.a.createElement("button",{type:"submit"},"Save")))}function w(e){let{setIsLogin:t}=e;return l.a.createElement(m.a,null,l.a.createElement("div",{className:"notes-page"},l.a.createElement(d,{setIsLogin:t}),l.a.createElement("section",null,l.a.createElement(E.a,{path:"/",component:p,exact:!0}),l.a.createElement(E.a,{path:"/create",component:h,exact:!0}),l.a.createElement(E.a,{path:"/edit/:id",component:g,exact:!0}))))}var v=function(){const[e,t]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{(async()=>{const e=localStorage.getItem("tokenStore");if(e){const a=await s.a.get("/users/verify",{headers:{Authorization:e}});if(console.log(a),t(a.data),!1===a.data)localStorage.clear()}else t(!1)})()},[]),l.a.createElement("div",{className:"App"},e?l.a.createElement(w,{setIsLogin:t}):l.a.createElement(i,{setIsLogin:t}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}},[[27,1,2]]]);
//# sourceMappingURL=main.4cf09e25.chunk.js.map